<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
      
<mapper namespace="kr.co.swrts.contents.report.daosImle">  
  
<select id="selectScheduleCnt" parameterType="map" resultType="int">
/* selectScheduleList */
	SELECT
        COUNT(1)
	FROM schedule_mst
	WHERE USEFLAG = #{useflag}
	<if test='division != null  and division != ""'>
		and DIVISION	=	#{division}
 	</if>
 	ORDER BY SCHEDULE_SEQ ASC
	
</select>


<select id="selectScheduleList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.ScheduleMstVO">
/* selectScheduleList */
	SELECT
        A.SCHEDULE_SEQ 		AS SCHEDULE_SEQ
        , A.DIVISION 		AS DIVISION 
	 	, A.COMPANY_CODE 	AS COMPANY_CODE
		, A.WORK_INFO 		AS WORK_INFO
		, A.CHECK_CYCLE 	AS CHECK_CYCLE 
		, A.SCHEDULE_JAN 	AS SCHEDULE_JAN
		, A.SCHEDULE_FEB 	AS SCHEDULE_FEB
		, A.SCHEDULE_MAR 	AS SCHEDULE_MAR
		, A.SCHEDULE_APR 	AS SCHEDULE_APR 
		, A.SCHEDULE_MAY 	AS SCHEDULE_MAY
		, A.SCHEDULE_JUN 	AS SCHEDULE_JUN
		, A.SCHEDULE_JUL 	AS SCHEDULE_JUL
		, A.SCHEDULE_AUG 	AS SCHEDULE_AUG
		, A.SCHEDULE_SEP 	AS SCHEDULE_SEP
		, A.SCHEDULE_OCT 	AS SCHEDULE_OCT
		, A.SCHEDULE_NOV 	AS SCHEDULE_NOV
		, A.SCHEDULE_DEC 	AS SCHEDULE_DEC
		, A.ENTITY 			AS ENTITY
        , A.CONTRACT 		AS CONTRACT
        , A.FILE_SEQ 		AS FILE_SEQ
        , A.USEFLAG 		AS USEFLAG
	FROM SCHEDULE_MST A
	WHERE USEFLAG = #{useflag}
	<if test='division != null  and division != ""'>
		and DIVISION	=	#{division}
 	</if>
 	ORDER BY SCHEDULE_SEQ ASC
	
</select>

<insert id="insertSchedule" parameterType="kr.co.swrts.contents.report.domains.ScheduleMstVO">
/* insertSchedule */
	INSERT INTO SCHEDULE_MST(
	    DIVISION
	    ,COMPANY_CODE
	    ,WORK_INFO
	    ,CHECK_CYCLE
	    ,SCHEDULE_JAN
	    ,SCHEDULE_FEB
	    ,SCHEDULE_MAR
	    ,SCHEDULE_APR
	    ,SCHEDULE_MAY
	    ,SCHEDULE_JUN
	    ,SCHEDULE_JUL
	    ,SCHEDULE_AUG
	    ,SCHEDULE_SEP
	    ,SCHEDULE_OCT
	    ,SCHEDULE_NOV
	    ,SCHEDULE_DEC
	    ,ENTiTY
	    ,CONTRACT
	    ,CREATED_BY
	    ,LAST_UPDATE_BY
	) values (
	    #{division}
	    ,#{company_code}
	    ,#{work_info}
	    ,#{check_cycle}
	    ,#{schedule_jan}
	    ,#{schedule_feb}
	    ,#{schedule_mar}
	    ,#{schedule_apr}
	    ,#{schedule_may}
	    ,#{schedule_jun}
	    ,#{schedule_jul}
	    ,#{schedule_aug}
	    ,#{schedule_sep}
	    ,#{schedule_oct}
	    ,#{schedule_nov}
	    ,#{schedule_dec}
	    ,#{entity}
	    ,#{contract}
	    ,#{created_by}
	    ,#{last_update_by}
	)
</insert>

<update id="updateSchedule" parameterType="kr.co.swrts.contents.report.domains.ScheduleMstVO">
/* updateSchedule */
	UPDATE SCHEDULE_MST SET
	    LAST_UPDATE_BY	=	#{last_update_by}
	    ,LAST_UPDATE_DATE = NOW()
	<if test='company_code != null  and company_code != ""'>
		,COMPANY_CODE	=	#{company_code}
 	</if>	    
 	<if test='work_info != null  and work_info != ""'>
		,WORK_INFO		=	#{work_info}
 	</if>
 	<if test='check_cycle != null  and check_cycle != ""'>
		,CHECK_CYCLE	=	#{check_cycle}
 	</if>
 	<if test='schedule_jan != null  and schedule_jan != ""'>
		,SCHEDULE_JAN	=	#{schedule_jan}
 	</if>
 	<if test='schedule_feb != null  and schedule_feb != ""'>
		,SCHEDULE_FEB	=	#{schedule_feb}
 	</if>
	<if test='schedule_mar != null  and schedule_mar != ""'>
		,SCHEDULE_MAR	=	#{schedule_mar}
 	</if>
 	<if test='schedule_apr != null  and schedule_apr != ""'>
		,SCHEDULE_APR	=	#{schedule_apr}
 	</if>    
 	<if test='schedule_may != null  and schedule_may != ""'>
		,SCHEDULE_MAY	=	#{schedule_may}
 	</if>
 	<if test='schedule_jun != null  and schedule_jun != ""'>
		,SCHEDULE_JUN	=	#{schedule_jun}
 	</if>
 	<if test='schedule_jul != null  and schedule_jul != ""'>
		,SCHEDULE_JUL	=	#{schedule_jul}
 	</if>
 	<if test='schedule_aug != null  and schedule_aug != ""'>
		,SCHEDULE_AUG	=	#{schedule_aug}
 	</if>
 	<if test='schedule_sep != null  and schedule_sep != ""'>
		,SCHEDULE_SEP	=	#{schedule_sep}
 	</if>
 	<if test='schedule_oct != null  and schedule_oct != ""'>
		,SCHEDULE_OCT	=	#{schedule_oct}
 	</if>
 	<if test='schedule_nov != null  and schedule_nov != ""'>
		,SCHEDULE_NOV	=	#{schedule_nov}
 	</if>
 	<if test='schedule_dec != null  and schedule_dec != ""'>
		,SCHEDULE_DEC	=	#{schedule_dec}
 	</if>
 	<if test='entity != null  and entity != ""'>
		,ENTITY			=	#{entity}
 	</if>
 	<if test='contract != null  and contract != ""'>
		,CONTRACT		=	#{contract}
 	</if>
 	<if test='file_seq != null  and file_seq != 0'>
		,FILE_SEQ		=	#{file_seq}
 	</if>
	where SCHEDULE_SEQ 	=	#{schedule_seq}
	
</update>

<update id="deleteSchdule" parameterType="kr.co.swrts.contents.report.domains.ScheduleMstVO"> 
	/* deleteSchdule */
	UPDATE SCHEDULE_MST SET
		last_update_date = NOW()
		,last_update_by = '박주임' 
		,USEFLAG = 0
	WHERE SCHEDULE_SEQ = #{schedule_seq}
	
</update> 

<select id="selectDetailedWorkCnt" parameterType="map" resultType="int">
/* selectDetailedWorkCnt */
	SELECT
		COUNT(1)
	FROM DETAILED_WORK_MST
	WHERE USEFLAG = #{useflag}
	AND WORK_DATE = #{work_date}
 	ORDER BY WORK_SEQ ASC
	
</select>

<select id="selectDetailedWorkList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.DetailedWorkMstVO">
/* selectDetailedWorkList */
	SELECT
		WORK_SEQ
		, SECTOR
		, WORK_DATE
		, FR_WORK
		, TO_WORK
		, REMARK
        , USEFLAG
        , COMPANY_CODE
    FROM DETAILED_WORK_MST
	WHERE USEFLAG = #{useflag}
	AND WORK_DATE = #{work_date}
 	ORDER BY WORK_SEQ ASC
	
</select>


<insert id="insertDetailedWork" parameterType="kr.co.swrts.contents.report.domains.DetailedWorkMstVO">
/* insertDetailedWork */
	INSERT INTO DETAILED_WORK_MST (
	    SECTOR
	    , WORK_DATE
	    , FR_WORK
	    , TO_WORK
	    , REMARK
	    , COMPANY_CODE
		, CREATED_BY
	    , LAST_UPDATE_BY
	) values (
	    #{sector}
	    ,#{work_date}
	    ,#{fr_work}
	    ,#{to_work}
	    ,#{remark}
	    ,#{company_code}
	    ,#{created_by}
	    ,#{last_update_by}
	)
</insert>

<update id="updateDetailedWork" parameterType="kr.co.swrts.contents.report.domains.DetailedWorkMstVO">
/* updateDetailedWork */
	UPDATE DETAILED_WORK_MST SET
	    LAST_UPDATE_BY	=	#{last_update_by}
	    ,LAST_UPDATE_DATE = NOW()
	<if test='company_code != null  and company_code != ""'>
		,COMPANY_CODE	=	#{company_code}
 	</if>
 	<if test='sector != null  and sector != ""'>
		,SECTOR			=	#{sector}
 	</if>
 	<if test='work_date != null  and work_date != ""'>
		,WORK_DATE		=	#{work_date}
 	</if>
 	<if test='fr_work != null  and fr_work != ""'>
		,FR_WORK		=	#{fr_work}
 	</if>
 	<if test='to_work != null  and to_work != ""'>
		,TO_WORK		=	#{to_work}
 	</if>
 	<if test='remark != null  and remark != ""'>
		,REMARK			=	#{remark}
 	</if>
	where WORK_SEQ 	=	#{work_seq}
	
</update>

<update id="deleteDetailedWork" parameterType="kr.co.swrts.contents.report.domains.DetailedWorkMstVO"> 
	/* deleteDetailedWork */
	UPDATE DETAILED_WORK_MST SET
		last_update_date = NOW()
		,last_update_by = '박주임' 
		,USEFLAG = 0
	WHERE WORK_SEQ = #{work_seq}
	
</update> 

<select id="selectRepairCnt" parameterType="map" resultType="int">
/* selectRepairCnt */
	SELECT
		COUNT(1)
	FROM REPAIR_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY REPAIR_SEQ ASC
	
</select>

<select id="selectRepairList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.RepairMstVO">
/* selectRepairList */
	SELECT
		REPAIR_SEQ
		, FR_WORK
		, TO_WORK
		, FR_IMG_ID
		, TO_IMG_ID
		, REMARK
        , USEFLAG
        , COMPANY_CODE
        , CREATED_DATE
    FROM REPAIR_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY REPAIR_SEQ ASC
	
</select>


<select id="selectContractCnt" parameterType="map" resultType="int">
/* selectContractCnt */
	SELECT
		COUNT(1)
    FROM CONTRACT_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY TO_DAY ASC
	
</select>

<select id="selectContractList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.ContractMstVO">
/* selectContractList */
	SELECT
		CONTRACT_SEQ
	    , CONTRACT_DETAILS
	    , CONTRACT_COMPANY
	    , DATE_FORMAT(FR_DAY,'%Y.%c.%d') AS FR_DAY
	    , DATE_FORMAT(TO_DAY,'%Y.%c.%d') AS TO_DAY
	    , CONTRACT_YEARS
	    , CONTRACT_DIVISION
	    , PAYMENT
	    , REMARK
    FROM CONTRACT_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY TO_DAY ASC
	
</select>

<update id="updateContract" parameterType="kr.co.swrts.contents.report.domains.ContractMstVO">
/* updateContrasct */
	UPDATE CONTRACT_MST SET
	    LAST_UPDATE_BY	=	#{created_by}
	    ,LAST_UPDATE_DATE = NOW()
	<if test='company_code != null  and company_code != ""'>
		,COMPANY_CODE	=	#{company_code}
 	</if>
 	<if test='contract_details != null  and contract_details != ""'>
		,CONTRACT_DETAILS			=	#{contract_details}
 	</if>
 	<if test='contract_company != null  and contract_company != ""'>
		,CONTRACT_COMPANY			=	#{contract_company}
 	</if>
 	<if test='fr_day != null  and fr_day != ""'>
		,FR_DAY		=	#{fr_day}
 	</if>
 	<if test='to_day != null  and to_day != ""'>
		,TO_DAY		=	#{to_day}
 	</if>
 	<if test='contract_years != null  and contract_years != ""'>
		,CONTRACT_YEARS		=	#{contract_years}
 	</if>
 	<if test='contract_division != null  and contract_division != ""'>
		,CONTRACT_DIVISION		=	#{contract_division}
 	</if>
 	<if test='payment != null  and payment != ""'>
		,PAYMENT		=	#{payment}
 	</if>
 	<if test='remark != null  and remark != ""'>
		,REMARK			=	#{remark}
 	</if>
	WHERE CONTRACT_SEQ 	=	#{contract_seq}
	
</update>

<insert id="insertContract" parameterType="kr.co.swrts.contents.report.domains.ContractMstVO">
/* insertContract */
	INSERT INTO CONTRACT_MST (
	    CONTRACT_DETAILS
	    , CONTRACT_COMPANY
	    , FR_DAY
	    , TO_DAY
	    , CONTRACT_YEARS
	    , CONTRACT_DIVISION
	    , PAYMENT
	    , REMARK
	    , COMPANY_CODE
		, CREATED_BY
	    , LAST_UPDATE_BY
	) values (
	    #{contract_details}
	    ,#{contract_company}
	    ,#{fr_day}
	    ,#{to_day}
	    ,#{contract_years}
	    ,#{contract_division}
	    ,#{payment}
	    ,#{remark}
	    ,#{company_code}
	    ,#{created_by}
	    ,#{created_by}
	)
</insert>

<update id="deleteContract" parameterType="kr.co.swrts.contents.report.domains.ContractMstVO"> 
	/* deleteContract */
	UPDATE CONTRACT_MST SET
		last_update_date = NOW()
		,last_update_by = '박주임' 
		,USEFLAG = 0
	WHERE CONTRACT_SEQ = #{contract_seq}
	
</update> 


<select id="selectTrainingCnt" parameterType="map" resultType="int">
/* selectTrainingCnt */
	SELECT
		COUNT(1)
    FROM TRAINING_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY TRAINING_SEQ ASC
	
</select>


<select id="selectTrainingList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.TrainingMstVO">
/* selectTrainingList */
	SELECT
		TRAINING_SEQ
	    , DIVISION
	    , TRAINING_DATE
	    , TRAINING_PROGRESS
	    , ATTEND_COUNT
	    , TRAINING_CONTENT
    FROM TRAINING_MST
	WHERE USEFLAG = #{useflag}
 	ORDER BY TRAINING_SEQ ASC
	
</select>

<insert id="insertFile" parameterType="kr.co.swrts.contents.report.domains.FileMstVO">
/* insertFile */
	INSERT INTO FILE_MST (
	    FILE_DATE
	    , FILE_CONTENT
	    , FILE_NAME
	    , FILE_PATH
	    , FILE_SIZE
	    , TABLE_NAME
	    , TABLE_SEQ
		, CREATED_BY
	    , LAST_UPDATE_BY
	) values (
	    NOW()
	    ,#{file_content}
	    ,#{file_name}
	    ,#{file_path}
	    ,#{file_size}
	    ,#{table_name}
	    ,#{table_seq}
	    ,#{created_by}
	    ,#{created_by}
	)
</insert>

<select id="selectFileSeq" parameterType="kr.co.swrts.contents.report.domains.FileMstVO" resultType="int">
/* "selectFileSeq" */
	SELECT  
	    TABLE_SEQ
	FROM FILE_MST
	WHERE FILE_PATH = #{file_path}
	ORDER BY FILE_SEQ DESC LIMIT 1
	
</select>

<select id="selectFile" parameterType="map" resultType="kr.co.swrts.contents.report.domains.FileMstVO">
/* "selectFile" */
	SELECT
		FILE_SEQ
		, FILE_DATE
	    , FILE_CONTENT
	    , FILE_NAME
	    , FILE_PATH
	    , FILE_SIZE
    FROM FILE_MST
	WHERE FILE_SEQ = #{file_seq}
	
</select>

<select id="selectFileCnt" parameterType="map" resultType="int">
/* "selectFileCnt" */
	SELECT 
	      COUNT(FILE_SEQ)
	FROM FILE_MST
	WHERE TABLE_NAME = #{table_name}
	AND TABLE_SEQ = #{table_seq}
	AND USEFLAG = #{useflag}
	
</select>

<select id="selectFileList" parameterType="map" resultType="kr.co.swrts.contents.report.domains.FileMstVO">
/* "selectFileList" */
	SELECT 
	        FILE_SEQ
	        ,FILE_DATE
	        ,FILE_CONTENT
	        ,FILE_PATH
	        ,FILE_SIZE
	        ,FILE_NAME
	        ,TABLE_SEQ
	        ,TABLE_NAME
	        ,COMPANY_CODE
	FROM FILE_MST
	WHERE TABLE_NAME = #{table_name}
	AND TABLE_SEQ = #{table_seq}
	AND USEFLAG = #{useflag}
	
</select>


</mapper>

